<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spiral | Real-time Performance & Insights</title>
    <meta name="description" content="Predict future events and trade shares in outcomes.">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" type="image/png" href="bucks.png">
</head>

<body>

    <header>
        <div class="container">
            <!-- Top Navigation Bar -->
            <div class="top-bar">
                <div class="logo-container" id="goHome">
                    <div class="logo-icon"></div>
                    <span class="logo-text">Spiral</span>
                    <div class="coin-balance" id="headerBalance">
                        <img src="bucks.png" alt="G" class="gbucks-icon">
                        <span id="userBalanceText">0</span>
                    </div>
                </div>

                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" class="search-input" placeholder="Search Spiral" id="searchInput">
                </div>

                <div class="nav-actions">
                    <a href="#" class="nav-link how-it-works-link" id="howItWorksBtn">
                        <span class="info-icon-circle">üëÅ</span> How it works
                    </a>
                    <div id="authButtons" style="display: flex; align-items: center; gap: 20px;">
                        <button class="btn btn-primary" id="signupBtn">Sign Up</button>
                    </div>
                    <div class="menu-container">
                        <span class="menu-trigger" id="menuToggle">‚ò∞</span>
                        <div class="dropdown-menu" id="navDropdown">
                            <div class="user-info-section">
                                <div class="user-avatar-small"></div>
                                <div class="user-details">
                                    <span class="user-name">User Account</span>
                                    <span class="user-handle">@user_123</span>
                                </div>
                            </div>
                            <div class="menu-divider"></div>
                            <a href="#" class="menu-item" id="leaderboardBtn">
                                <span class="menu-item-icon">üèÜ</span> Leaderboard
                            </a>
                            <a href="#" class="menu-item" id="completedEventsBtn">
                                <span class="menu-item-icon">üèÅ</span> Completed Events
                            </a>
                            <div class="menu-item" id="darkModeToggle">
                                <span class="menu-item-icon">‚òÄÔ∏è</span> Light Mode
                                <div class="toggle-switch">
                                    <div class="toggle-knob"></div>
                                </div>
                            </div>
                            <div class="menu-divider"></div>
                            <a href="#" class="menu-item">Terms of Use</a>
                            <a href="#" class="menu-item">Support</a>
                            <div class="menu-divider"></div>
                            <a href="#" class="menu-item logout">Log Out</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Categories Bar -->
            <div class="category-bar" id="mainCategoryBar">
                <div class="cat-item active" data-cat="Trending">üìà Trending</div>
                <div class="cat-item" data-cat="New">‚ú® New</div>
                <div class="cat-item" data-cat="Politics">üèõÔ∏è Politics</div>
                <div class="cat-item" data-cat="Sports">‚öΩ Sports</div>
                <div class="cat-item" data-cat="Culture">üé≠ Culture</div>
                <div class="cat-item" data-cat="Academics">üéì Academics</div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- HOMEPAGE SECTION -->
        <div id="homepage" class="animate-in">
            <!-- Browse & Sub-categories Bar -->
            <div class="browse-bar">
                <div class="sub-cat-slider" id="subCatSlider">
                    <!-- Pills injected via script -->
                </div>

                <div class="volume-toggle">
                    <div class="volume-option active" data-volume="24hr">24hr Volume</div>
                    <div class="volume-option" data-volume="all">All</div>
                    <div class="volume-option" data-volume="active">Active</div>
                    <div class="volume-option watchlist-btn" data-volume="watchlist">Watch List</div>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="market-grid" id="marketGrid">
                <!-- Cards injected via script -->
            </div>
        </div>

        <!-- EVENT DETAIL SECTION -->
        <div id="eventpage" class="animate-in">
            <div class="event-container">
                <!-- Main Content (Left) -->
                <div class="event-content">
                    <button class="back-btn" id="backBtn">‚Üê Back</button>
                    <div class="event-main-header">
                        <img src="" alt="" class="event-icon" id="eventIcon">
                        <div style="flex: 1;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                <h1 class="event-title" id="eventTitle">Market Title</h1>
                                <div style="display: flex; gap: 16px;">
                                    <span class="footer-icon" style="font-size: 1.2rem;"
                                        data-tooltip="Copy Link">üîó</span>
                                    <span id="eventWatchlistIcon" class="footer-icon"
                                        style="font-size: 1.2rem;">üîñ</span>
                                </div>
                            </div>
                            <div id="eventStats"
                                style="display: flex; gap: 20px; margin-top: 12px; color: var(--text-secondary); font-size: 0.85rem; font-weight: 500;">
                                <span id="eventVolume"><img src="bucks.png" class="gbucks-logo-inline"> 685M Vol.</span>
                                <span>‚Ä¢</span>
                                <span id="eventDate">Feb 8, 2026</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-area">
                        <div class="chart-header">
                            <div id="chartLegend" style="display: flex; gap: 20px;">
                                <!-- Legend items -->
                            </div>
                            <div class="timeframe-selector">
                                <button class="tf-btn" data-tf="5m">5m</button>
                                <button class="tf-btn" data-tf="4h">4h</button>
                                <button class="tf-btn" data-tf="1d">1d</button>
                                <button class="tf-btn" data-tf="3d">3d</button>
                                <button class="tf-btn" data-tf="1w">1w</button>
                                <button class="tf-btn" data-tf="1m">1m</button>
                                <button class="tf-btn active" data-tf="ALL">ALL</button>
                            </div>
                        </div>
                        <canvas id="marketChart"></canvas>
                    </div>
                </div>

                <!-- Trading Widget (Right) -->
                <aside class="trade-widget">
                    <!-- Widget Header -->
                    <div class="widget-outcome-header">
                        <img src="" alt="" id="widgetOutcomeIcon" class="widget-outcome-icon">
                        <div class="outcome-select-wrapper">
                            <select id="widgetOutcomeSelector" class="widget-outcome-name-dropdown">
                                <!-- Options populated via JS -->
                            </select>
                            <span class="dropdown-chevron">‚åµ</span>
                        </div>
                    </div>

                    <div class="widget-tabs-row">
                        <div class="trade-tabs-simple">
                            <div class="trade-tab-simple active" data-action="buy">Buy</div>
                            <div class="trade-tab-simple" data-action="sell">Sell</div>
                        </div>
                        <div class="order-type-simple">
                            Market ‚åµ
                        </div>
                    </div>

                    <!-- Amount Section -->
                    <div class="amount-container">
                        <span class="amount-label">Amount</span>
                        <div class="amount-display">
                            <img src="bucks.png" class="gbucks-icon"
                                style="width: 28px; height: 28px; margin-right: 4px;">
                            <span id="betAmountDisplay">0.</span>
                        </div>
                    </div>

                    <!-- Quick Amounts -->
                    <div class="quick-btns-row">
                        <button class="q-btn" data-amount="1">+1</button>
                        <button class="q-btn" data-amount="10">+10</button>
                        <button class="q-btn" data-amount="100">+100</button>
                        <button class="q-btn" data-amount="1000">+1,000</button>
                    </div>

                    <!-- Action Button -->
                    <button class="trade-button-main" id="tradeButtonMain">
                        Trade
                    </button>

                    <!-- To Win Section (Polymarket Style) -->
                    <div class="to-win-container">
                        <div class="to-win-header">
                            <span class="to-win-label">To win üí∏</span>
                            <span id="statPotentialReturn" class="to-win-amount">$0.00</span>
                        </div>
                        <div class="avg-price-subtext">
                            Avg. Price <span id="statAvgPrice">0¬¢</span> <span class="info-icon">‚ìò</span>
                        </div>
                    </div>

                    <p style="margin-top: 24px; font-size: 0.75rem; color: var(--text-muted); text-align: center;">
                        By trading, you agree to the <a href="#" style="color: var(--text-muted)">Terms of Use</a>.
                    </p>
                </aside>
            </div>
        </div>

        <!-- LEADERBOARD SECTION -->
        <div id="leaderboardpage" style="display: none;" class="animate-in">
            <div class="leaderboard-layout">
                <!-- Main Table (Left) -->
                <div class="leaderboard-main">
                    <button class="back-btn lb-back-btn">‚Üê Back</button>
                    <h1 class="leaderboard-title">Leaderboard</h1>

                    <div class="leaderboard-controls">
                        <div class="lb-timeframe-row">
                            <div class="timeframe-selector lb-tf-selector">
                                <button class="tf-btn" data-lb-tf="today">Today</button>
                                <button class="tf-btn" data-lb-tf="weekly">Weekly</button>
                                <button class="tf-btn active" data-lb-tf="monthly">Monthly</button>
                                <button class="tf-btn" data-lb-tf="all">All</button>
                            </div>
                            <div class="cat-dropdown-sim">
                                <span>All Categories</span>
                                <span class="dropdown-chevron">‚åµ</span>
                            </div>
                        </div>

                        <div class="lb-search-wrap">
                            <span class="search-icon">üîç</span>
                            <input type="text" class="lb-search-input" id="lbSearchInput" placeholder="Search by name">
                        </div>
                    </div>

                    <div class="lb-table-container">
                        <table class="lb-table">
                            <thead>
                                <tr>
                                    <th class="lb-col-rank">#</th>
                                    <th class="lb-col-user">User</th>
                                    <th class="lb-col-profit">Profit/Loss</th>
                                    <th class="lb-col-volume">Volume</th>
                                </tr>
                            </thead>
                            <tbody id="lbTableBody">
                                <!-- Rows injected via script -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Sidebar (Right) -->
                <aside class="leaderboard-sidebar">
                    <div class="sidebar-card">
                        <h3 class="sidebar-title">Biggest wins this month</h3>
                        <div id="bigWinsList" class="big-wins-list">
                            <!-- Items injected via script -->
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- Profile Hover Popup -->
        <div id="lbProfilePopup" class="lb-profile-popup" style="display: none;">
            <div class="pp-header">
                <div class="pp-avatar" id="ppAvatar"></div>
                <div class="pp-user-info">
                    <div class="pp-name" id="ppName">Username</div>
                    <div class="pp-joined" id="ppJoined">Joined May 2025</div>
                </div>
            </div>
            <div class="pp-stats">
                <div class="pp-stat-item">
                    <div class="pp-stat-val" id="ppPositions"><img src="bucks.png" class="gbucks-logo-inline"> 1m</div>
                    <div class="pp-stat-label">Positions</div>
                </div>
                <div class="pp-stat-item">
                    <div class="pp-stat-val profit" id="ppProfit"><img src="bucks.png" class="gbucks-logo-inline"> 7m
                    </div>
                    <div class="pp-stat-label">Profit/Loss</div>
                </div>
                <div class="pp-stat-item">
                    <div class="pp-stat-val" id="ppVolume"><img src="bucks.png" class="gbucks-logo-inline"> 129m</div>
                    <div class="pp-stat-label">Volume</div>
                </div>
            </div>
        </div>

        <!-- COMPLETED EVENTS SECTION -->
        <div id="completedEventsPage" style="display: none;" class="animate-in">
            <button class="back-btn" id="completedEventsBackBtn">‚Üê Back</button>
            <h1 class="leaderboard-title">Completed Events</h1>
            <div class="market-grid" id="completedEventsGrid">
                <!-- Completed market cards injected here -->
            </div>
        </div>
    </main>

    <!-- MODALS -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content" id="modalContent">
            <span class="modal-close" id="modalClose">&times;</span>

            <!-- How It Works Flow -->
            <div id="hiwFlow" style="display: none;">
                <!-- Step 1 -->
                <div class="hiw-step active" data-step="1">
                    <div class="hiw-visual">
                        <div class="hiw-mock-card">
                            <div class="mock-market-text">Who will win the match<br>between Red House and Green House?
                            </div>
                            <div class="mock-stats">
                                <div class="mock-percentage">50%</div>
                                <div class="mock-chart"></div>
                            </div>
                            <div class="mock-btns-row">
                                <div class="mock-btn-y">Red House</div>
                                <div class="mock-btn-n">Green House</div>
                            </div>
                        </div>
                    </div>
                    <h2 class="hiw-title">1. Pick a Market</h2>
                    <p class="hiw-description">Pick the house you think will win. Odds change as students trade,
                        reflecting the crowd‚Äôs prediction in real time.</p>
                    <button class="hiw-btn next-hiw-step">Next</button>
                </div>

                <!-- Step 2 -->
                <div class="hiw-step" data-step="2">
                    <div class="hiw-visual">
                        <div class="hiw-mock-slips">
                            <div class="mock-slip slip-1">
                                <div class="slip-amt"><img src="bucks.png" class="gbucks-logo-inline"> 100</div>
                                <div class="slip-win">To Win <img src="bucks.png" class="gbucks-logo-inline"> 400</div>
                                <div class="slip-btn-y" style="background:var(--accent-red);">Buy Red House</div>
                            </div>
                            <div class="mock-slip slip-2">
                                <div class="slip-amt"><img src="bucks.png" class="gbucks-logo-inline"> 100</div>
                                <div class="slip-win">To Win <img src="bucks.png" class="gbucks-logo-inline"> 133</div>
                                <div class="slip-btn-n" style="background:var(--accent-green);">Buy Green House</div>
                            </div>
                        </div>
                    </div>
                    <h2 class="hiw-title">2. Place a Bet</h2>
                    <p class="hiw-description">Every user starts with 10,000 G-Bucks on login. Use them to trade
                        predictions‚Äîno real money, no wallets, no payments.</p>
                    <button class="hiw-btn next-hiw-step">Next</button>
                </div>

                <!-- Step 3 -->
                <div class="hiw-step" data-step="3">
                    <div class="hiw-visual">
                        <div class="hiw-mock-receipt">
                            <div class="receipt-header">Who will win the match between Red House and Green House?</div>
                            <div class="receipt-divider"></div>
                            <div class="receipt-row"><span>Odds</span><span class="dot"></span></div>
                            <div class="receipt-row"><span>Bet</span><span class="dot"></span></div>
                            <div class="receipt-win-row">
                                <span>To Win</span>
                                <span class="win-amt"><img src="bucks.png" class="gbucks-logo-inline"> 250</span>
                            </div>
                            <div class="receipt-cashout">Cash Out</div>
                        </div>
                    </div>
                    <h2 class="hiw-title">3. Profit ü§ë</h2>
                    <p class="hiw-description">Sell your position anytime before the match ends to lock in profits, or
                        hold till the result is declared.</p>
                    <button class="hiw-btn" id="finishHiw">Get Started</button>
                </div>
            </div>

            <!-- Auth Flow -->
            <div id="authFlow" style="display: none;">
                <h2 class="auth-title" id="authTitle">Log In to Spiral</h2>
                <button class="google-btn" id="googleAuthBtn">
                    <img src="https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png" alt="Google"
                        style="width: 18px; height: 18px;">
                    Continue with Google
                </button>

                <div class="auth-divider">OR</div>

                <div class="auth-inputs-stack">
                    <input type="text" class="auth-input-full" id="authUsername" placeholder="Username"
                        style="display: none;">
                    <input type="email" class="auth-input-full" id="authEmail" placeholder="Email address">
                    <input type="password" class="auth-input-full" id="authPassword" placeholder="Password">
                    <button class="auth-submit-full" id="authSubmitBtn">Log In</button>
                    <div id="authError"
                        style="color: var(--accent-red); font-size: 0.85rem; text-align: center; margin-top: 5px; display: none;">
                    </div>
                    <div id="authModeToggle"
                        style="color: var(--accent-blue); font-size: 0.85rem; text-align: center; margin-top: 10px; cursor: pointer; font-weight: 500;">
                        Don't have an account? Sign Up</div>
                </div>

                <p style="margin-top: 24px; font-size: 0.75rem; color: var(--text-muted); text-align: center;">
                    By continuing, you agree to our <a href="#" style="color: var(--text-muted)">Terms</a> & <a href="#"
                        style="color: var(--text-muted)">Privacy</a>.
                </p>
            </div>
        </div>
    </div>

    <!-- Firebase SDK / Auth Logic -->
    <script type="module" src="script.js"></script>
</body>

</html>